<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Statystyka ankiety / –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–ø—Ä–æ—Å–∞ / Survey statistics</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
  <style>
    body { background: #f5f7fa; font-family: sans-serif; margin: 0; padding: 0;}
    .container { max-width: 900px; margin: 35px auto; background: #fff; border-radius: 18px; box-shadow: 0 8px 28px rgba(34, 100, 34, 0.11); padding: 24px 18px 14px; }
    h1 { text-align: center; margin-bottom: 8px;}
    .lang-switch { text-align: right; margin-bottom: 18px;}
    .lang-switch button {
      margin-left: 8px;
      cursor: pointer;
      border: none;
      border-radius: 8px;
      padding: 7px 14px;
      font-weight: 600;
      opacity: 0.8;
      transition: opacity 0.3s, box-shadow 0.3s;
      user-select: none;
      color: white;
    }
    .lang-pl { background-color: #388e3c; } /* –∑–µ–ª–µ–Ω—ã–π */
    .lang-ru { background-color: #1976d2; } /* —Å–∏–Ω–∏–π */
    .lang-en { background-color: #d32f2f; } /* –∫—Ä–∞—Å–Ω—ã–π */
    .lang-uk { background-color: #fbc02d; color: #333; } /* –∂–µ–ª—Ç—ã–π */
    .lang-ka { background-color: #5d4037; } /* –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π */
    .lang-switch button.active {
      opacity: 1;
      box-shadow: 0 0 8px rgba(0,0,0,0.3);
    }
    .qstat { margin: 38px 0 44px;}
    .qtitle { font-weight: bold; font-size: 1.08em; margin-bottom: 7px;}
    .answers-list { margin: 8px 0 6px 8px; }
    .answers-list div { margin-bottom: 4px; }
    .answers-list span { display: inline-block; min-width: 130px; }
    .vote-count { font-weight: 600; margin-left: 12px; color: #444; }
    canvas { margin: 10px auto 0; display: block;}
    .legend {
      margin-top: 8px;
      font-size: 0.9em;
    }
    .legend span {
      display: inline-flex;
      align-items: center;
      margin-right: 14px;
    }
    .legend span .color-box {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      display: inline-block;
      margin-right: 6px;
    }
    @media (max-width: 900px) { .container { padding: 8px 2vw;} }
    @media (max-width: 540px) { .answers-list span { min-width: 90px; } }
  </style>
</head>
<body>
  <div class="container">
    <div class="lang-switch">
      <button class="lang-pl" onclick="setLang('pl')">üáµüá± Polski</button>
      <button class="lang-ru" onclick="setLang('ru')">üá∑üá∫ –†—É—Å—Å–∫–∏–π</button>
      <button class="lang-en" onclick="setLang('en')">üá¨üáß English</button>
      <button class="lang-uk" onclick="setLang('uk')">üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</button>
      <button class="lang-ka" onclick="setLang('ka')">üá¨üá™ ·É•·Éê·É†·Éó·É£·Éö·Éò</button>
    </div>
    <h1 id="statTitle">Statystyka ankiety</h1>
    <div id="resultsBlock">
      <div style="text-align:center; color:#888; font-size:1.04em; margin: 55px 0 0;">
        ≈Åadowanie wynik√≥w... / –ó–∞–≥—Ä—É–∑–∫–∞... / Loading... / –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è... / ·É¢·Éï·Éò·É†·Éó·Éò·É° ·É©·Éê·É¢·Éï·Éò·É†·Éó·Éï·Éê...
      </div>
    </div>
    <div style="margin:36px 0 4px; text-align:center; color:#aaa; font-size:0.96em;" id="footerText">
      NSZZ ‚ÄûSolidarno≈õƒá‚Äù w Autodoc
    </div>
  </div>

  <script>
const COLORS = ['#3b73d1', '#dd3d2d', '#f0a226', '#2e7d32']; // –°–∏–Ω–∏–π, –∫—Ä–∞—Å–Ω—ã–π, –æ—Ä–∞–Ω–∂–µ–≤—ã–π, –∑–µ–ª—ë–Ω—ã–π

const QUESTIONS = [
  {
    pl: "1. Jak oceniasz styl zarzƒÖdzania obecnego kierownika magazynu?",
    ru: "1. –ö–∞–∫ –≤—ã –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç–µ —Å—Ç–∏–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è —Å–∫–ª–∞–¥–∞?",
    en: "1. How do you rate the management style of the current warehouse manager?",
    uk: "1. –Ø–∫ –≤–∏ –æ—Ü—ñ–Ω—é—î—Ç–µ —Å—Ç–∏–ª—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –Ω–∏–Ω—ñ—à–Ω—å–æ–≥–æ –∫–µ—Ä—ñ–≤–Ω–∏–∫–∞ —Å–∫–ª–∞–¥—É?",
    ka: "1. ·É†·Éù·Éí·Éù·É† ·Éê·É§·Éê·É°·Éî·Éë·Éó ·Éê·Éõ·Éü·Éê·Éõ·Éò·Éú·Éì·Éî·Éö·Éò ·É°·Éê·É¨·Éß·Éù·Éë·Éò·É° ·Éõ·Éõ·Éê·É†·Éó·Éï·Éî·Éö·Éò·É° ·Éõ·Éê·É†·Éó·Éï·Éò·É° ·É°·É¢·Éò·Éö·É°?",
    options: [
      {pl: "SzanujƒÖcy i profesjonalny", ru: "–£–≤–∞–∂–∏—Ç–µ–ª—å–Ω—ã–π –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π", en: "Respectful and professional", uk: "–ü–æ–≤–∞–≥–∞ —Ç–∞ –ø—Ä–æ—Ñ–µ—Å—ñ–æ–Ω–∞–ª—ñ–∑–º", ka: "·Éõ·É™·Éî·Éõ·Éö·Éù·Éë·Éê ·Éì·Éê ·Éû·É†·Éù·É§·Éî·É°·Éò·Éù·Éú·Éê·Éö·Éò·Éñ·Éõ·Éò"},
      {pl: "Ch≈Çodny i formalny", ru: "–•–æ–ª–æ–¥–Ω—ã–π –∏ —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π", en: "Cold and formal", uk: "–•–æ–ª–æ–¥–Ω–∏–π —ñ —Ñ–æ—Ä–º–∞–ª—å–Ω–∏–π", ka: "·É™·Éò·Éï·Éò ·Éì·Éê ·É§·Éù·É†·Éõ·Éê·Éö·É£·É†·Éò"},
      {pl: "Autorytarny, powodujƒÖcy napiƒôcie", ru: "–ê–≤—Ç–æ—Ä–∏—Ç–∞—Ä–Ω—ã–π, –≤—ã–∑—ã–≤–∞—é—â–∏–π –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ", en: "Authoritarian causing tension", uk: "–ê–≤—Ç–æ—Ä–∏—Ç–∞—Ä–Ω–∏–π, —â–æ –≤–∏–∫–ª–∏–∫–∞—î –Ω–∞–ø—Ä—É–∂–µ–Ω–Ω—è", ka: "·Éê·Éï·É¢·Éù·É†·Éò·É¢·Éê·É†·É£·Éö·Éò ·Éì·Éê ·É°·É¢·É†·Éî·É°·Éò·É° ·Éí·Éê·Éõ·Éù·Éõ·É¨·Éï·Éî·Éï·Éò"},
      {pl: "Poni≈ºajƒÖcy i wzbudzajƒÖcy strach", ru: "–£–Ω–∏–∂–∞—é—â–∏–π –∏ —Å–æ–∑–¥–∞—é—â–∏–π —Å—Ç—Ä–∞—Ö", en: "Humiliating and fear-inducing", uk: "–ü—Ä–∏–Ω–∏–∂—É—é—á–∏–π —ñ –≤–∏–∫–ª–∏–∫–∞—î —Å—Ç—Ä–∞—Ö", ka: "·Éõ·Éê·ÉÆ·Éò·Éú·ÉØ·Éò ·Éì·Éê ·É®·Éò·É®·Éò·É° ·Éõ·Éù·Éõ·Éí·Éï·É†·Éî·Éö·Éò"}
    ]
  },
  {
    pl: "2. Jak siƒô czujesz w kontakcie z kierownikiem magazynu?",
    ru: "2. –ö–∞–∫ –≤—ã —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—Ç–µ –ø—Ä–∏ –æ–±—â–µ–Ω–∏–∏ —Å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–º —Å–∫–ª–∞–¥–∞?",
    en: "2. How do you feel communicating with the warehouse manager?",
    uk: "2. –Ø–∫ –≤–∏ –ø–æ—á—É–≤–∞—î—Ç–µ—Å—å –ø—ñ–¥ —á–∞—Å —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ –∫–µ—Ä—ñ–≤–Ω–∏–∫–æ–º —Å–∫–ª–∞–¥—É?",
    ka: "2. ·É†·Éù·Éí·Éù·É† ·Éí·É†·É´·Éú·Éù·Éë·Éó ·Éó·Éê·Éï·É° ·É°·Éê·É¨·Éß·Éù·Éë·Éò·É° ·Éõ·Éõ·Éê·É†·Éó·Éï·Éî·Éö·Éó·Éê·Éú ·É£·É†·Éó·Éò·Éî·É†·Éó·Éù·Éë·Éò·É°·Éê·É°?",
    options: [
      {pl: "Pewnie", ru: "–£–≤–µ—Ä–µ–Ω–Ω–æ", en: "Confident", uk: "–í–ø–µ–≤–Ω–µ–Ω–æ", ka: "·Éì·Éê·ÉØ·Éî·É†·Éî·Éë·Éò·Éó"},
      {pl: "Z napiƒôciem", ru: "–ù–∞–ø—Ä—è–∂—ë–Ω–Ω–æ", en: "Tense", uk: "–ù–∞–ø—Ä—É–∂–µ–Ω–æ", ka: "·É°·É¢·É†·Éî·É°·É£·Éö·Éò"},
      {pl: "Unikam kontaktu", ru: "–ò–∑–±–µ–≥–∞—é –æ–±—â–µ–Ω–∏—è", en: "Avoid contact", uk: "–£–Ω–∏–∫–∞—é –∫–æ–Ω—Ç–∞–∫—Ç—É", ka: "·Éô·Éù·Éú·É¢·Éê·É•·É¢·Éò·É° ·Éê·É™·Éò·Éö·Éî·Éë·Éê"},
      {pl: "Odczuwam strach i bezsilno≈õƒá", ru: "–ß—É–≤—Å—Ç–≤—É—é —Å—Ç—Ä–∞—Ö –∏ –Ω–µ–∑–∞—â–∏—â—ë–Ω–Ω–æ—Å—Ç—å", en: "Feel fear and helplessness", uk: "–í—ñ–¥—á—É–≤–∞—é —Å—Ç—Ä–∞—Ö —Ç–∞ –±–µ–∑–ø–æ—Ä–∞–¥–Ω—ñ—Å—Ç—å", ka: "·É®·Éò·É®·Éò ·Éì·Éê ·É£·É°·É£·É°·É£·É†·Éù·Éë·Éê"}
    ]
  },
  {
    pl: "3. Jak czƒôsto masz realny dostƒôp do rozmowy z kierownikiem magazynu w sprawach s≈Çu≈ºbowych?",
    ru: "3. –ù–∞—Å–∫–æ–ª—å–∫–æ —á–∞—Å—Ç–æ –≤—ã –∏–º–µ–µ—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –æ–±—â–µ–Ω–∏—é —Å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–º —Å–∫–ª–∞–¥–∞ –ø–æ —Ä–∞–±–æ—á–∏–º –≤–æ–ø—Ä–æ—Å–∞–º?",
    en: "3. How often do you have real access to discuss work matters with the warehouse manager?",
    uk: "3. –Ø–∫ —á–∞—Å—Ç–æ –≤–∏ –º–∞—î—Ç–µ —Ä–µ–∞–ª—å–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ –∫–µ—Ä—ñ–≤–Ω–∏–∫–æ–º —Å–∫–ª–∞–¥—É –∑ —Ä–æ–±–æ—á–∏—Ö –ø–∏—Ç–∞–Ω—å?",
    ka: "3. ·É†·Éê·Éõ·Éì·Éî·Éú·Éê·Éì ·ÉÆ·É®·Éò·É†·Éê·Éì ·Éí·Éê·É•·Éï·Éó ·É†·Éî·Éê·Éö·É£·É†·Éò ·É¨·Éï·Éì·Éù·Éõ·Éê ·É°·Éê·É¨·Éß·Éù·Éë·Éò·É° ·Éõ·Éî·Éú·Éî·ÉØ·Éî·É†·Éó·Éê·Éú ·É°·Éê·Éõ·É£·É®·Éê·Éù ·É°·Éê·Éô·Éò·Éó·ÉÆ·Éî·Éë·Éñ·Éî ·É°·Éê·É£·Éë·Éê·É†·Éñ·Éî?",
    options: [
      {pl: "Kierownik zawsze jest dostƒôpny", ru: "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω", en: "Manager is always available", uk: "–ö–µ—Ä—ñ–≤–Ω–∏–∫ –∑–∞–≤–∂–¥–∏ –¥–æ—Å—Ç—É–ø–Ω–∏–π", ka: "·Éõ·Éî·Éú·Éî·ÉØ·Éî·É†·Éò ·Éß·Éù·Éï·Éî·Éö·Éó·Éï·Éò·É° ·ÉÆ·Éî·Éö·Éõ·Éò·É°·Éê·É¨·Éï·Éì·Éù·Éõ·Éò·Éê"},
      {pl: "Czasami udaje siƒô porozmawiaƒá", ru: "–ò–Ω–æ–≥–¥–∞ —É–¥–∞—ë—Ç—Å—è –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å", en: "Sometimes able to talk", uk: "–Ü–Ω–æ–¥—ñ –≤–¥–∞—î—Ç—å—Å—è –ø–æ–≥–æ–≤–æ—Ä–∏—Ç–∏", ka: "·É°·ÉÆ·Éï·Éê·Éõ·Éù·É•·Éõ·Éî·Éì·Éù·Éì ·É®·Éî·Éí·Éò·É´·Éö·Éò·Éê ·É°·Éê·É£·Éë·Éê·É†·Éò"},
      {pl: "Prawie zawsze odmawia kontaktu", ru: "–ü–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –æ—Ç–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—Ç –æ–±—â–µ–Ω–∏—è", en: "Almost always refuses contact", uk: "–ú–∞–π–∂–µ –∑–∞–≤–∂–¥–∏ –≤—ñ–¥–º–æ–≤–ª—è—î—Ç—å—Å—è –≤—ñ–¥ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è", ka: "·Éõ·Éù·É°·Éê·Éö·Éù·Éì·Éú·Éî·Éö·Éò·Éê ·Éó·Éò·Éó·É•·Éõ·Éò·É° ·Éß·Éù·Éï·Éî·Éö·Éó·Éï·Éò·É° ·É£·É†·Éó·Éò·Éî·É†·Éó·Éù·Éë·Éò·É° ·É®·Éî·É¨·Éß·Éï·Éî·É¢·Éê"},
      {pl: "Ca≈Çkowicie unika kontaktu z pracownikami", ru: "–°–æ–≤—Å–µ–º –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏–∑–±–µ–≥–∞–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤", en: "Completely avoids contact with employees", uk: "–ü–æ–≤–Ω—ñ—Å—Ç—é —É–Ω–∏–∫–∞—î –∫–æ–Ω—Ç–∞–∫—Ç—É –∑ –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫–∞–º–∏", ka: "·É°·É†·É£·Éö·Éò·Éê·Éì ·Éî·É†·Éò·Éì·Éî·Éë·Éê ·Éó·Éê·Éú·Éê·Éõ·É®·É†·Éù·Éõ·Éö·Éî·Éë·Éó·Éê·Éú ·É£·É†·Éó·Éò·Éî·É†·Éó·Éù·Éë·Éê·É°"}
    ]
  },
  {
    pl: "4. Jak zmieni≈Çy siƒô Twoje warunki pracy i samopoczucie po objƒôciu funkcji przez obecnego kierownika?",
    ru: "4. –ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –º–æ—Ä–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —É—Å–ª–æ–≤–∏—è —Ç—Ä—É–¥–∞ –ø–æ—Å–ª–µ –ø—Ä–∏—Ö–æ–¥–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è?",
    en: "4. How have your working conditions and well-being changed since the current manager took over?",
    uk: "4. –Ø–∫ –∑–º—ñ–Ω–∏–ª–∏—Å—è —É–º–æ–≤–∏ –ø—Ä–∞—Ü—ñ —Ç–∞ —Å–∞–º–æ–ø–æ—á—É—Ç—Ç—è –ø—ñ—Å–ª—è –ø—Ä–∏—Ö–æ–¥—É –Ω–∏–Ω—ñ—à–Ω—å–æ–≥–æ –∫–µ—Ä—ñ–≤–Ω–∏–∫–∞?",
    ka: "4. ·É†·Éù·Éí·Éù·É† ·É®·Éî·Éò·É™·Éï·Éê·Éö·Éê ·É°·Éê·Éõ·É£·É®·Éê·Éù ·Éû·Éò·É†·Éù·Éë·Éî·Éë·Éò ·Éì·Éê ·Éô·Éî·Éó·Éò·Éö·Éì·É¶·Éî·Éù·Éë·Éê ·Éê·ÉÆ·Éê·Éö·Éò ·Éõ·Éî·Éú·Éî·ÉØ·Éî·É†·Éò·É° ·Éõ·Éù·É°·Éï·Éö·Éò·É° ·É®·Éî·Éõ·Éì·Éî·Éí?",
    options: [
      {pl: "Poprawi≈Çy siƒô", ru: "–£–ª—É—á—à–∏–ª–∏—Å—å", en: "Improved", uk: "–ü–æ–∫—Ä–∞—â–∏–ª–∏—Å—å", ka: "·Éê·É£·Éõ·ÉØ·Éù·Éë·Éî·É°·Éì·Éê"},
      {pl: "Bez zmian", ru: "–ù–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å", en: "No change", uk: "–ë–µ–∑ –∑–º—ñ–Ω", ka: "·É™·Éï·Éö·Éò·Éö·Éî·Éë·Éê ·Éê·É† ·Éê·É†·Éò·É°"},
      {pl: "Pogorszy≈Çy siƒô", ru: "–£—Ö—É–¥—à–∏–ª–∏—Å—å", en: "Worsened", uk: "–ü–æ–≥—ñ—Ä—à–∏–ª–∏—Å—è", ka: "·Éí·Éê·É£·Éê·É†·Éî·É°·Éì·Éê"},
      {pl: "Sta≈Çy siƒô nie do zniesienia", ru: "–°—Ç–∞–ª–∏ –Ω–µ–≤—ã–Ω–æ—Å–∏–º—ã–º–∏", en: "Became unbearable", uk: "–°—Ç–∞–ª–∏ –Ω–µ–≤—ã–Ω–æ—Å–∏–º–∏–º–∏", ka: "·Éê·É†·Éê·É°·Éê·Éú·É•·É™·Éò·É†·Éî·Éë·Éî·Éö·Éò·Éê"}
    ]
  },
  {
    pl: "5. Jak zachowanie kierownictwa wp≈Çynƒô≈Ço na produktywno≈õƒá pracy w zespole?",
    ru: "5. –ö–∞–∫, –ø–æ –≤–∞—à–µ–º—É –º–Ω–µ–Ω–∏—é, –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ–≤–ª–∏—è–ª–æ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ç—Ä—É–¥–∞ –≤ –∫–æ–ª–ª–µ–∫—Ç–∏–≤–µ?",
    en: "5. How do you think management's behavior affected team productivity?",
    uk: "5. –Ø–∫ –≤–∏ –≤–≤–∞–∂–∞—î—Ç–µ, –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –∫–µ—Ä—ñ–≤–Ω–∏—Ü—Ç–≤–∞ –≤–ø–ª–∏–Ω—É–ª–∞ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∫–æ–º–∞–Ω–¥–∏?",
    ka: "5. ·Éó·É•·Éï·Éî·Éú·Éò ·Éê·Éñ·É†·Éò·Éó, ·É†·Éù·Éí·Éù·É† ·Éò·Éõ·Éù·É•·Éõ·Éî·Éì·Éê ·Éõ·Éî·Éú·Éî·ÉØ·Éõ·Éî·Éú·É¢·Éò·É° ·É•·É™·Éî·Éï·Éê·Éõ ·Éí·É£·Éú·Éì·Éò·É° ·Éû·É†·Éù·Éì·É£·É•·É¢·Éò·É£·Éö·Éù·Éë·Éê·Éñ·Éî?",
    options: [
      {pl: "Wydajno≈õƒá wzros≈Ça", ru: "–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã—Ä–æ—Å–ª–∞", en: "Productivity increased", uk: "–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∑—Ä–æ—Å–ª–∞", ka: "·Éû·É†·Éù·Éì·É£·É•·É¢·Éò·É£·Éö·Éù·Éë·Éê ·Éí·Éê·Éò·Éñ·Éê·É†·Éì·Éê"},
      {pl: "Bez zmian", ru: "–ù–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å", en: "No change", uk: "–ë–µ–∑ –∑–º—ñ–Ω", ka: "·É™·Éï·Éö·Éò·Éö·Éî·Éë·Éê ·Éê·É† ·Éê·É†·Éò·É°"},
      {pl: "Nieco spad≈Ça", ru: "–°–Ω–∏–∑–∏–ª–∞—Å—å –Ω–µ–º–Ω–æ–≥–æ", en: "Slightly decreased", uk: "–¢—Ä–æ—Ö–∏ –∑–Ω–∏–∑–∏–ª–∞—Å—å", ka: "·Éõ·Éú·Éò·É®·Éï·Éú·Éî·Éö·Éù·Éï·Éú·Éê·Éì ·É®·Éî·Éõ·É™·Éò·É†·Éì·Éê"},
      {pl: "Znacznie siƒô pogorszy≈Ça", ru: "–°–∏–ª—å–Ω–æ —É–ø–∞–ª–∞ –∏–∑-–∑–∞ –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã", en: "Significantly worsened", uk: "–ó–Ω–∞—á–Ω–æ –ø–æ–≥—ñ—Ä—à–∏–ª–∞—Å—å", ka: "·É´·Éê·Éö·Éò·Éê·Éú ·Éí·Éê·É£·Éê·É†·Éî·É°·Éì·Éê"}
    ]
  },
  {
    pl: "6. Jak oceniasz zmiany w podej≈õciu do kar dyscyplinarnych po objƒôciu funkcji przez obecnego kierownika?",
    ru: "6. –ö–∞–∫ –≤—ã –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –∫ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω—ã–º –≤–∑—ã—Å–∫–∞–Ω–∏—è–º –ø–æ—Å–ª–µ –ø—Ä–∏—Ö–æ–¥–∞ –Ω–æ–≤–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è —Å–∫–ª–∞–¥–∞?",
    en: "6. How do you rate changes in disciplinary measures since the new manager arrived?",
    uk: "6. –Ø–∫ –≤–∏ –æ—Ü—ñ–Ω—é—î—Ç–µ –∑–º—ñ–Ω–∏ —É –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∞—Ä–Ω–∏—Ö —Å—Ç—è–≥–Ω–µ–Ω–Ω—è—Ö –ø—ñ—Å–ª—è –ø—Ä–∏—Ö–æ–¥—É –Ω–æ–≤–æ–≥–æ –∫–µ—Ä—ñ–≤–Ω–∏–∫–∞?",
    ka: "6. ·É†·Éù·Éí·Éù·É† ·Éê·É§·Éê·É°·Éî·Éë·Éó ·Éì·Éò·É°·É™·Éò·Éû·Éö·Éò·Éú·Éê·É†·É£·Éö·Éò ·Éñ·Éù·Éõ·Éî·Éë·Éò·É° ·É™·Éï·Éö·Éò·Éö·Éî·Éë·Éî·Éë·É° ·Éê·ÉÆ·Éê·Éö·Éò ·Éõ·Éî·Éú·Éî·ÉØ·Éî·É†·Éò·É° ·Éõ·Éù·É°·Éï·Éö·Éò·É° ·É®·Éî·Éõ·Éì·Éî·Éí?",
    options: [
      {pl: "Nie zauwa≈ºy≈Çem/am r√≥≈ºnicy", ru: "–ù–µ –∑–∞–º–µ—Ç–∏–ª(–∞) —Ä–∞–∑–Ω–∏—Ü—ã", en: "No difference noticed", uk: "–ù–µ –ø–æ–º—ñ—Ç–∏–≤(–ª–∞) —Ä—ñ–∑–Ω–∏—Ü—ñ", ka: "·Éê·É†·Éê·É§·Éî·É†·Éò ·É®·Éî·Éò·É™·Éï·Éê·Éö·Éê"},
      {pl: "SƒÖ one nak≈Çadane czƒô≈õciej ni≈º wcze≈õniej", ru: "–ò—Ö —Å—Ç–∞–ª–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å —á–∞—â–µ", en: "Applied more often", uk: "–ó–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è —á–∞—Å—Ç—ñ—à–µ", ka: "·É£·É§·É†·Éù ·ÉÆ·É®·Éò·É†·Éê·Éì ·Éí·Éê·Éõ·Éù·Éò·Éß·Éî·Éú·Éî·Éë·Éê"},
      {pl: "Wzros≈Ça surowo≈õƒá i liczba kar", ru: "–£–∂–µ—Å—Ç–æ—á–∏–ª–∏—Å—å –∏ —É—á–∞—Å—Ç–∏–ª–∏—Å—å –≤–∑—ã—Å–∫–∞–Ω–∏—è", en: "Severity and number increased", uk: "–ü—ñ–¥–≤–∏—â–∏–ª–∞—Å—å —Å—É–≤–æ—Ä—ñ—Å—Ç—å —ñ –∫—ñ–ª—å–∫—ñ—Å—Ç—å", ka: "·Éí·Éê·É£·Éõ·Éô·Éê·É™·É†·Éì·Éê ·Éì·Éê ·Éí·Éê·Éò·Éñ·Éê·É†·Éì·Éê ·É†·Éê·Éù·Éì·Éî·Éú·Éù·Éë·Éê"},
      {pl: "Kary sta≈Çy siƒô narzƒôdziem nacisku", ru: "–í–∑—ã—Å–∫–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–∞–≤–ª–µ–Ω–∏—è", en: "Penalties used as pressure tool", uk: "–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —è–∫ –∑–∞—Å—ñ–± —Ç–∏—Å–∫—É", ka: "·Éì·Éò·É°·É™·Éò·Éû·Éö·Éò·Éú·É£·É†·Éò ·Éñ·Éù·Éõ·Éî·Éë·Éò ·É©·Éê·É†·Éó·É£·Éö·Éê ·É†·Éù·Éí·Éù·É†·É™ ·Éñ·Éî·É¨·Éù·Éö·Éò·É° ·Éò·Éú·É°·É¢·É†·É£·Éõ·Éî·Éú·É¢·Éò"}
    ]
  },
  {
    pl: "7. Czy Twoim zdaniem zdarza≈Çy siƒô niesprawiedliwe lub bezpodstawne kary wobec pracownik√≥w?",
    ru: "7. –ü–æ –≤–∞—à–µ–º—É –º–Ω–µ–Ω–∏—é, —Å–ª—É—á–∞–ª–∏—Å—å –ª–∏ —Å–ª—É—á–∞–∏ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã—Ö –∏–ª–∏ –±–µ–∑–æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –≤–∑—ã—Å–∫–∞–Ω–∏–π –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤?",
    en: "7. In your opinion, have there been unfair or baseless penalties against employees?",
    uk: "7. –ù–∞ –≤–∞—à—É –¥—É–º–∫—É, —á–∏ –±—É–ª–∏ –≤–∏–ø–∞–¥–∫–∏ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∏—Ö –∞–±–æ –±–µ–∑–ø—ñ–¥—Å—Ç–∞–≤–Ω–∏—Ö —Å—Ç—è–≥–Ω–µ–Ω—å —â–æ–¥–æ –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤?",
    ka: "7. ·Éó·É•·Éï·Éî·Éú·Éò ·Éê·Éñ·É†·Éò·Éó, ·Éò·Éß·Éù ·É£·É°·Éê·Éõ·Éê·É†·Éó·Éö·Éù ·Éê·Éú ·É£·É°·Éê·É§·É£·É´·Éï·Éö·Éù ·Éì·Éê·É°·ÉØ·Éî·Éë·Éò ·Éó·Éê·Éú·Éê·Éõ·É®·É†·Éù·Éõ·Éö·Éî·Éë·Éñ·Éî?",
    options: [
      {pl: "Tak, wielokrotnie", ru: "–î–∞, –Ω–µ–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ", en: "Yes, repeatedly", uk: "–¢–∞–∫, –Ω–µ–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ", ka: "·Éì·Éò·Éê·ÉÆ, ·É†·Éê·Éõ·Éì·Éî·Éú·ÉØ·Éî·É†·Éõ·Éî"},
      {pl: "Tak, sporadycznie", ru: "–î–∞, —ç–ø–∏–∑–æ–¥–∏—á–µ—Å–∫–∏", en: "Yes, occasionally", uk: "–¢–∞–∫, —á–∞—Å –≤—ñ–¥ —á–∞—Å—É", ka: "·Éì·Éò·Éê·ÉÆ, ·ÉÆ·Éê·Éú·Éì·Éê·ÉÆ·Éê·Éú"},
      {pl: "Nie, nie zauwa≈ºy≈Çem/am takich przypadk√≥w", ru: "–ù–µ—Ç, –Ω–µ –∑–∞–º–µ—á–∞–ª(–∞)", en: "No, haven't noticed", uk: "–ù—ñ, –Ω–µ –ø–æ–º—ñ—á–∞–≤(–ª–∞)", ka: "·Éê·É†·Éê, ·Éê·É† ·Éõ·Éò·Éõ·É©·Éú·Éî·Éï·Éò·Éê"},
      {pl: "Trudno powiedzieƒá", ru: "–¢—Ä—É–¥–Ω–æ —Å–∫–∞–∑–∞—Ç—å", en: "Hard to say", uk: "–í–∞–∂–∫–æ —Å–∫–∞–∑–∞—Ç–∏", ka: "·Éõ·Éò·É≠·Éò·É†·É° ·Éó·É•·Éõ·Éê"}
    ]
  }
];

const LANG_NAMES = {
  pl: "Statystyka ankiety",
  ru: "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–ø—Ä–æ—Å–∞",
  en: "Survey statistics",
  uk: "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è",
  ka: "·É°·É¢·Éê·É¢·Éò·É°·É¢·Éò·Éô·Éê"
};

let curLang = localStorage.getItem("ankieta_lang") || "pl";
let results = [];

function setLang(lang) {
  curLang = lang;
  localStorage.setItem("ankieta_lang", lang);

  document.getElementById("statTitle").textContent = LANG_NAMES[lang] || LANG_NAMES.pl;

  document.querySelectorAll(".lang-switch button").forEach(b => {
    b.classList.toggle("active", b.classList.contains("lang-" + lang));
  });

  renderAll();
}

async function loadResults() {
  try {
    const resp = await fetch("/results");
    if (resp.ok) {
      results = await resp.json();
      renderAll();
    } else {
      showErr({pl: "B≈ÇƒÖd pobierania danych", ru: "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö", en: "Data loading error", uk:"–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö", ka:"·Éõ·Éù·Éú·Éê·É™·Éî·Éõ·Éî·Éë·Éò·É° ·É©·Éê·Éõ·Éù·É¢·Éï·Éò·É†·Éó·Éï·Éò·É° ·É®·Éî·É™·Éì·Éù·Éõ·Éê"}[curLang] || "Data loading error");
    }
  } catch {
    showErr({pl: "Brak po≈ÇƒÖczenia z serwerem", ru: "–ù–µ—Ç —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º", en:"No connection to server", uk:"–ù–µ–º–∞—î –∑–≤'—è–∑–∫—É –∑ —Å–µ—Ä–≤–µ—Ä–æ–º", ka:"·É°·Éî·É†·Éï·Éî·É†·Éó·Éê·Éú ·Éô·Éê·Éï·É®·Éò·É†·Éò·É° ·Éê·É†·É•·Éù·Éú·Éê"}[curLang] || "No connection to server");
  }
}

function showErr(msg) {
  document.getElementById("resultsBlock").innerHTML = `<div style="color:#d00; text-align:center; margin:60px 0 20px;">${msg}</div>`;
}

function renderAll() {
  if (!results.length) {
    document.getElementById("resultsBlock").innerHTML = `<div style="text-align:center; color:#888; font-size:1.04em; margin: 55px 0 0;">
      ${
        {
          pl: "Brak odpowiedzi",
          ru: "–ù–µ—Ç –æ—Ç–≤–µ—Ç–æ–≤",
          en: "No responses",
          uk: "–í—ñ–¥—Å—É—Ç–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ",
          ka: "·Éû·Éê·É°·É£·ÉÆ·Éî·Éë·Éò ·Éê·É† ·Éê·É†·Éò·É°"
        }[curLang] || "No responses"
      }
    </div>`;
    return;
  }
  let html = '';
  QUESTIONS.forEach((q, qi) => {
    let counts = [0, 0, 0, 0],
      total = 0;
    results.forEach(ans => {
      let idx = Number(ans['q' + (qi + 1)]) - 1;
      if (idx >= 0 && idx < 4) {
        counts[idx]++;
        total++;
      }
    });
    html += `<div class="qstat"><div class="qtitle">${q[curLang]} <span class="vote-count">(${total} ${
      {pl:"odpowiedzi", ru:"–æ—Ç–≤–µ—Ç–æ–≤", en:"responses", uk:"–≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π", ka:"·Éû·Éê·É°·É£·ÉÆ·Éò"}[curLang] || "responses"
    })</span></div><div class="answers-list">`;
    q.options.forEach((op, i) => {
      let c = counts[i],
        p = total ? Math.round(1000 * c / total) / 10 : 0;
      html += `<div>
        <span>${op[curLang]}</span>
        <span style="font-weight:600; margin-left:8px;">${c}</span>
        <span style="color:#888; margin-left:5px;">(${p}%)</span>
      </div>`;
    });
    html += `</div><canvas id="chart_q${qi + 1}" width="390" height="170"></canvas>`;

    // –õ–µ–≥–µ–Ω–¥–∞ —Ü–≤–µ—Ç–æ–≤ –ø–æ–¥ –¥–∏–∞–≥—Ä–∞–º–º–æ–π
    html += `<div class="legend">`;
    q.options.forEach((op, i) => {
      html += `<span>
        <span class="color-box" style="background:${COLORS[i]}"></span>
        ${op[curLang]}
      </span>`;
    });
    html += `</div>`;

    html += `</div>`;
  });
  document.getElementById("resultsBlock").innerHTML = html;
  setTimeout(drawCharts, 50);
}

function drawCharts() {
  QUESTIONS.forEach((q, qi) => {
    let counts = [0, 0, 0, 0], total = 0;
    results.forEach(ans => {
      let idx = Number(ans['q' + (qi + 1)]) - 1;
      if (idx >= 0 && idx < 4) {
        counts[idx]++;
        total++;
      }
    });
    const ctx = document.getElementById(`chart_q${qi + 1}`).getContext('2d');
    if (window['chart_' + qi]) {
      window['chart_' + qi].destroy();
    }
    window['chart_' + qi] = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: q.options.map(o => o[curLang]),
        datasets: [{
          data: counts,
          backgroundColor: COLORS,
          borderColor: '#fff',
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false },
          datalabels: {
            color: '#fff',
            formatter: function(value, context) {
              const total = context.chart.data.datasets[0].data.reduce((a,b)=>a+b,0);
              if (total === 0) return '';
              return (value / total * 100).toFixed(1) + '%';
            },
            font: { weight: 'bold', size: 14 }
          },
          tooltip: {
            callbacks: {
              label: function(context) {
                const total = context.chart.data.datasets[0].data.reduce((a,b)=>a+b,0);
                return context.label + ': ' + context.parsed + ' (' + (context.parsed / total * 100).toFixed(1) + '%)';
              }
            }
          }
        }
      },
      plugins: [ChartDataLabels]
    });
  });
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —è–∑—ã–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
loadResults();
setLang(curLang);
  </script>
</body>
</html>
